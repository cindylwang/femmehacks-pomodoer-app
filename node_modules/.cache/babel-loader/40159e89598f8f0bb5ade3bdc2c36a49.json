{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState, useRef } from 'react';\nimport socketIOClient from 'socket.io-client';\nconst SOCKET_SERVER_URL = 'http://localhost:4000';\n\nconst useTimer = roomId => {\n  _s();\n\n  const [start, setStart] = useState(false);\n  const socketRef = useRef();\n  const TIMER_START_STOP = 'timerPush';\n  useEffect(() => {\n    // creates websocket connection\n    socketRef.current = socketIOClient(SOCKET_SERVER_URL, {\n      query: {\n        roomId\n      }\n    }); // listens for timer start/stop push\n\n    socketRef.current.on(TIMER_START_STOP, data => {\n      setStart(!start);\n    }); // destroy socket reference when the connection is closed\n\n    return () => {\n      socketRef.current.disconnect();\n    };\n  }, [roomId]); //sends message to server that forwards to all users in room\n\n  const sendStart = start => {\n    socketRef.current.emit(NEW_TASK_EVENT, {\n      status: start\n    });\n  };\n\n  return {\n    start,\n    sendStart\n  };\n};\n\n_s(useTimer, \"CCdPwG5VZCq5YtXIs1OJTiL1cnI=\");\n\nexport default useTimer;","map":{"version":3,"sources":["/Users/bubird/Documents/GitHub/femmehacks-pomodoer-app/src/useTimer.js"],"names":["useEffect","useState","useRef","socketIOClient","SOCKET_SERVER_URL","useTimer","roomId","start","setStart","socketRef","TIMER_START_STOP","current","query","on","data","disconnect","sendStart","emit","NEW_TASK_EVENT","status"],"mappings":";;AAAA,SAAQA,SAAR,EAAmBC,QAAnB,EAA6BC,MAA7B,QAA0C,OAA1C;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AAEA,MAAMC,iBAAiB,GAAG,uBAA1B;;AAEA,MAAMC,QAAQ,GAAIC,MAAD,IAAY;AAAA;;AACzB,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBP,QAAQ,CAAC,KAAD,CAAlC;AACA,QAAMQ,SAAS,GAAGP,MAAM,EAAxB;AACA,QAAMQ,gBAAgB,GAAG,WAAzB;AAGAV,EAAAA,SAAS,CAAC,MAAK;AACX;AACAS,IAAAA,SAAS,CAACE,OAAV,GAAoBR,cAAc,CAACC,iBAAD,EAAoB;AAClDQ,MAAAA,KAAK,EAAC;AAACN,QAAAA;AAAD;AAD4C,KAApB,CAAlC,CAFW,CAMX;;AACAG,IAAAA,SAAS,CAACE,OAAV,CAAkBE,EAAlB,CAAqBH,gBAArB,EAAwCI,IAAD,IAAU;AAC7CN,MAAAA,QAAQ,CAAC,CAACD,KAAF,CAAR;AACH,KAFD,EAPW,CAWX;;AACA,WAAO,MAAM;AACTE,MAAAA,SAAS,CAACE,OAAV,CAAkBI,UAAlB;AACH,KAFD;AAGH,GAfQ,EAeN,CAACT,MAAD,CAfM,CAAT,CANyB,CAuBzB;;AACA,QAAMU,SAAS,GAAIT,KAAD,IAAW;AACzBE,IAAAA,SAAS,CAACE,OAAV,CAAkBM,IAAlB,CAAuBC,cAAvB,EAAuC;AACnCC,MAAAA,MAAM,EAAEZ;AAD2B,KAAvC;AAGH,GAJD;;AAMA,SAAO;AAACA,IAAAA,KAAD;AAAQS,IAAAA;AAAR,GAAP;AACH,CA/BD;;GAAMX,Q;;AAiCN,eAAeA,QAAf","sourcesContent":["import {useEffect, useState, useRef} from 'react';\nimport socketIOClient from 'socket.io-client';\n\nconst SOCKET_SERVER_URL = 'http://localhost:4000';\n\nconst useTimer = (roomId) => {\n    const [start, setStart] = useState(false);\n    const socketRef = useRef();\n    const TIMER_START_STOP = 'timerPush'\n    \n\n    useEffect(()=> {\n        // creates websocket connection\n        socketRef.current = socketIOClient(SOCKET_SERVER_URL, {\n            query:{roomId},\n        });\n        \n        // listens for timer start/stop push\n        socketRef.current.on(TIMER_START_STOP, (data) => {\n            setStart(!start);\n        })\n\n        // destroy socket reference when the connection is closed\n        return () => {\n            socketRef.current.disconnect();\n        };\n    }, [roomId]);\n\n    //sends message to server that forwards to all users in room\n    const sendStart = (start) => {\n        socketRef.current.emit(NEW_TASK_EVENT, {\n            status: start\n        });\n    }\n\n    return {start, sendStart}\n}\n\nexport default useTimer\n\n"]},"metadata":{},"sourceType":"module"}